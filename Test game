#include <SDL2/SDL.h>
#include <assert.h>

int main (int argc, char* args[])
{
    /* INICIALIZACAO */
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_Window* win = SDL_CreateWindow("Game v0.1",
                         SDL_WINDOWPOS_UNDEFINED,
                         SDL_WINDOWPOS_UNDEFINED,
                         0, 0, SDL_WINDOW_FULLSCREEN_DESKTOP
                      );
    SDL_Renderer* ren = SDL_CreateRenderer(win, -1, 0);

    /* EXECUÇÃO */
    int largura, altura;
    SDL_GetWindowSize(win, &largura, &altura);
    SDL_Rect player = { 400,altura-150, 25,50 };
    SDL_Rect n1 = { 400,125, 100,50 };
    SDL_Rect n2 = { 700,75, 100,50 };
    SDL_Rect n3 = { 1000,175, 100,50 };
    SDL_Rect n4 = { 1300,125, 100,50 };
    SDL_Rect n5 = { 1600,50, 100,50 };
    SDL_Rect sol = { -100,75, 100,100 };
    //SDL_Rect lua = {1920,75,100,100};
    SDL_Rect grama = { 0,altura - 100, largura,50 };
    
	
    
    SDL_Event evt;
    int espera = 16;
    int pulando = 0;
    int descendo = 0;
    
    while(!SDL_QuitRequested()){
    	SDL_SetRenderDrawColor(ren, 0xbb,0xf3,0xf9,0x00);
	    SDL_RenderClear(ren);
	    SDL_SetRenderDrawColor(ren, 0xd0,0x9d,0x6a,0x00);
	    SDL_Rect terra = { 0,altura - 50, largura,50 };
	    SDL_RenderFillRect(ren, &terra);
	    SDL_SetRenderDrawColor(ren, 0x05,0xee,0x07,0x00);
	    SDL_RenderFillRect(ren, &grama);
	    SDL_SetRenderDrawColor(ren, 0xf3,0xf0,0x63,0x00);
	    SDL_RenderFillRect(ren, &sol);
	    //SDL_SetRenderDrawColor(ren, 0xf6,0xf1,0xD5,0x00);
	    //SDL_RenderFillRect(ren, &lua);
	    SDL_SetRenderDrawColor(ren, 0xff,0xff,0xff,0x00);
	    SDL_RenderFillRect(ren, &n1);
	    SDL_SetRenderDrawColor(ren, 0xff,0xff,0xff,0x00);
	    SDL_RenderFillRect(ren, &n2);
	    SDL_SetRenderDrawColor(ren, 0xff,0xff,0xff,0x00);
	    SDL_RenderFillRect(ren, &n3);
	    SDL_SetRenderDrawColor(ren, 0xff,0xff,0xff,0x00);
	    SDL_RenderFillRect(ren, &n4);
		SDL_SetRenderDrawColor(ren, 0x00,0x00,0x00,0x00);
	    SDL_RenderFillRect(ren, &player);
	    SDL_SetRenderDrawColor(ren, 0xff,0xff,0xff,0x00);
	    SDL_RenderFillRect(ren, &n5);
	    SDL_RenderPresent(ren);
	    
	    n1.x += 2;
        n2.x += 2;
        n3.x += 2;
        n4.x += 2;
        n5.x += 2;
        sol.x += 1;

        
        if (n1.x >= largura){
        	n1.x = -50;
		} else if (n2.x >= largura){
        	n2.x = -50;
		} else if (n3.x >= largura){
        	n3.x = -50;
		} else if (n4.x >= largura){
        	n4.x = -50;
		} else if (n5.x >= largura){
        	n5.x = -50;
		}
		if (sol.x >= largura){
        	sol.x = -100;
        }
		

        int isevt = SDL_WaitEventTimeout(&evt, espera);
        if (isevt) {
            if (evt.type == SDL_KEYDOWN) {
                switch (evt.key.keysym.sym) {
                    case SDLK_UP:
                    	if (pulando == 0 && player.y >= altura-150 && descendo == 0){
                    		pulando = 1;
						}
			
                        break;
                    case SDLK_LEFT:
                        player.x -= 10;
                        break;
                    case SDLK_RIGHT:
                        player.x += 10;
                        break;
                }
            }
        } else if (player.y < altura - 250 && pulando == 0){
            player.y += 10;
            descendo = 1;
        }else if(player.y == altura - 150 && descendo == 1){
        	descendo = 0;
		}
		
		if (pulando == 1){
			player.y -= 10;
			if(player.y <=altura - 500){
				pulando = 0;
			}
		}

	}
	
	SDL_DestroyRenderer(ren);
	SDL_DestroyWindow(win);
    SDL_Quit();
    
}
